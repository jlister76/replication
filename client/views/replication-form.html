<div layout="column" layout-align="start center">
  <div layout layout-align="space-between center" class="md-padding" style="width:720px;margin:1rem;">
    <h2>Replication Procedure Form</h2>
    <a ng-controller="LogOutCtrl" href="" ng-click="logout()">Sign Out</a>
  </div>
  <div layout layout-align="end center" class row style="margin:1rem; width:720px;">
    <div layout="column">
      <label for="dlist">Distribution List</label>
      <select ng-model="response.distribution_list" name="ditribution_list" id="dlist">
        <!--<option ng-repeat="(key,val) in distribution_lists" value="{{ list }}">{{ key }} - {{ val }}</option>-->
      </select>
    </div>
  </div>
  <div>
    <form name="replicationForm"
          ng-submit="sendEmail(response)">
      <fieldset class="field_set">
        <legend>
          HEATH EMPLOYEES
        </legend>
        <div layout="column" class="row">
          <div layout layout-align="start center" style="padding:1rem;">
            <input ng-model="response.atmos_employee" type="hidden">
            <input ng-model="response.employeeId" type="hidden">
            <label for="team_leader">Team Leader</label>
            <select ng-model="response.team_leader" id="team_leader">
              <option ng-repeat="teamleader in teamleaders" value="{{ teamleader.fname }} {{ teamleader.lname }}">{{
                teamleader.fname }} {{ teamleader.lname }}
              </option>
            </select>
        </div>
          <div layout="column" class="row">
            <span>Locate Technician</span>
            <div layout layout-align="start center">
              <div layout="column" style="margin:1rem;padding:.5rem;">
                <label for="locate_technician_fname">First Name</label>
                <input ng-model="response.locate_technician_fname" id="locate_technician_fname" type="text" required>
              </div>
              <div layout="column">
                <label for="locate_technician_lname">Last Name</label>
                <input ng-model="response.locate_technician_lname" id="locate_technician_lname" type="text" required>
              </div>
            </div>
          </div>
      </fieldset>
      <fieldset class="field_set">
        <legend>
          DAMAGE INFORMATION
        </legend>
        <div layout="column" class="md-padding">
          <div class="row">
            <div layout="column">
              <label for="heath_report">Heath Report Number</label>
              <input ng-model="response.heath_report" type="number" id="heath_report" required>
            </div>
          </div>
          <div layout="column" class="row">
            <span style="margin-bottom:1rem;"><em>Address Information</em></span>
            <div layout layout-align="space-between center">
              <div layout="column">
                <label for="street_number">Number</label>
                <input ng-model="response.street_number" type="number" id="street_number"
                       style="width:64px;"
                       required>
              </div>
              <div layout="column">
                <label for="street">Street</label>
                <input ng-model="response.street_name" type="text" id="street" required>
              </div>
              <div layout="column">
                <label for="street">Suffix</label>
                <select ng-model="response.street_suffix" name="street_suffix" id="street_suffix" required>
                  <option ng-repeat="suffix in suffixes | orderBy:'title'" value="{{ suffix.abrv }}">{{ suffix.label
                    }}
                  </option>
                </select>

              </div>
            </div>
          </div>
          <div layout class="row" layout-align="space-between center">
            <div layout="column">
              <label for="cross_street">Nearest Cross Street
                <small ng-if="!response.street_number"><em style="color:indianred;">*</em></small>
              </label>
              <input ng-model="response.cross_street" type="text" id="cross_street"
                     ng-required="!response.street_number">
            </div>
            <div layout="column">
              <label for="town">Town</label>
              <select ng-model="response.town" type="text" id="town" required>
                <option ng-repeat="town in towns | orderBy: 'town'" value="{{ town }}">{{ town }}</option>
              </select>
            </div>
          </div>
          <div class="row">
            <span><em>Facility Description</em></span>
            <div layout style="margin-top:1rem;">
              <label for="facility_size">Diameter</label>
              <select ng-model="response.facility_size" name="facility_size" id="facility_size" required>
                <option ng-repeat="size in diameters" value="{{ size }}">{{ size }}</option>

              </select>
              <label for="facility_material">Material</label>
              <select ng-model="response.facility_material" name="facility_material" id="facility_material" required>
                <option ng-repeat="material in materials" value="{{ material }}">{{ material }}</option>
              </select>
            </div>
          </div>
        </div>
      </fieldset>
      <fieldset class="field_set">
        <legend>REPLICATION RESULTS</legend>
        <div layout="column" class="md-padding">
          <div class="row">
            <span>Were the locate marks able to be replicated?</span>
            <select ng-model="response.able_to_replicate" name="able_to_replicate" required>
              <option value="Yes">Yes</option>
              <option value="No">No</option>
            </select>
          </div>
          <div ng-if="response.able_to_replicate === 'Yes'">
            <div class="row">
              <div layout="column">
                <input ng-model="response.atmos_determination" ng-init="response.atmos_determination = 'facility issue'"
                       type="hidden">
                <label for="facility_issue">Please describe the facility issue.</label>
                <textarea ng-model="response.atmos_comments" name="facility_issue" id="facility_issue" cols="30"
                          rows="7" ng-required="response.atmos_determination === 'facility issue'"></textarea>
              </div>
            </div>
          </div>
          <div ng-if="response.able_to_replicate === 'No'">
            <div class="row">
              <span>Please select the reason which best describes the root-cause?</span>
              <select ng-model="response.atmos_determination" name="unable_to_replicate"
                      ng-required="response.able_to_replicate === 'No'">
                <option value="Facility was altered or replaced">Facility was altered or replaced</option>
                <option value="Locate Error">Locate Error</option>
              </select>
            </div>
            <div layout="column" class="row">
              <span>Additional Comments?</span>
              <textarea ng-model="response.atmos_comments" name="additional_comments" id="additional_comments" cols="30"
                        rows="7"></textarea>
            </div>
          </div>

        </div>
      </fieldset>
      <div layout layout-align="center" style="width:700px;">
        <md-button type="submit"
                   ng-disabled="replicationForm.$invalid"
                   ng-class="{disabled:replicationForm.$invalid,active:replicationForm.$valid}"
                   ng-dblclick="false"
                   style="height: 48px; width:240px;">
          SEND RESULTS
        </md-button>
      </div>
    </form>
  </div>
</div>
